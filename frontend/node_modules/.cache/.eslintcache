[{"/Users/darlene/Desktop/dev/react-mesto-auth/src/index.js":"1","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/App.jsx":"2","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/ImagePopup.jsx":"3","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Login.js":"4","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/InfoTooltip.js":"5","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/ProtectedRoute.js":"6","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Register.js":"7","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Header.jsx":"8","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/PopupWithForm.jsx":"9","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Footer.jsx":"10","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Main.jsx":"11","/Users/darlene/Desktop/dev/react-mesto-auth/src/contexts/CurrentUserContext.js":"12","/Users/darlene/Desktop/dev/react-mesto-auth/src/utils/api.js":"13","/Users/darlene/Desktop/dev/react-mesto-auth/src/utils/auth.js":"14","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/EditAvatarPopup.js":"15","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/EditProfilePopup.js":"16","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/AddPlacePopup.js":"17","/Users/darlene/Desktop/dev/react-mesto-auth/src/utils/useForm.js":"18","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Card.jsx":"19"},{"size":339,"mtime":1689674861062,"results":"20","hashOfConfig":"21"},{"size":7740,"mtime":1689942976725,"results":"22","hashOfConfig":"21"},{"size":549,"mtime":1686841538188,"results":"23","hashOfConfig":"21"},{"size":1343,"mtime":1689866808179,"results":"24","hashOfConfig":"21"},{"size":856,"mtime":1689867348979,"results":"25","hashOfConfig":"21"},{"size":256,"mtime":1689867402702,"results":"26","hashOfConfig":"21"},{"size":1639,"mtime":1689866904259,"results":"27","hashOfConfig":"21"},{"size":1105,"mtime":1689853394289,"results":"28","hashOfConfig":"21"},{"size":839,"mtime":1688397136186,"results":"29","hashOfConfig":"21"},{"size":166,"mtime":1686841665636,"results":"30","hashOfConfig":"21"},{"size":1671,"mtime":1688111807486,"results":"31","hashOfConfig":"21"},{"size":112,"mtime":1688050834659,"results":"32","hashOfConfig":"21"},{"size":1391,"mtime":1689844694771,"results":"33","hashOfConfig":"21"},{"size":1132,"mtime":1689845631927,"results":"34","hashOfConfig":"21"},{"size":1249,"mtime":1688399188611,"results":"35","hashOfConfig":"21"},{"size":1920,"mtime":1689855238905,"results":"36","hashOfConfig":"21"},{"size":1529,"mtime":1688399184901,"results":"37","hashOfConfig":"21"},{"size":322,"mtime":1688370585097,"results":"38","hashOfConfig":"21"},{"size":1366,"mtime":1688111781769,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},"1qs6xlp",{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47"},{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"51","messages":"52","suppressedMessages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","suppressedMessages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","suppressedMessages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","suppressedMessages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"69","messages":"70","suppressedMessages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"72","messages":"73","suppressedMessages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"75","messages":"76","suppressedMessages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"78","messages":"79","suppressedMessages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","suppressedMessages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","suppressedMessages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"87","messages":"88","suppressedMessages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","suppressedMessages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"43"},{"filePath":"94","messages":"95","suppressedMessages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"97","messages":"98","suppressedMessages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},"/Users/darlene/Desktop/dev/react-mesto-auth/src/index.js",[],[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/App.jsx",["100"],[],"import \"../index.css\";\n\nimport { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate, Navigate } from \"react-router-dom\";\n\nimport Header from \"./Header.jsx\";\nimport Main from \"./Main.jsx\";\nimport Footer from \"./Footer.jsx\";\n\nimport PopupWithForm from \"./PopupWithForm.jsx\";\nimport ImagePopup from \"./ImagePopup.jsx\";\n\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nimport Login from \"./Login.js\";\nimport Register from \"./Register.js\";\n\nimport ProtectedRoute from \"./ProtectedRoute.js\";\nimport InfoTooltip from \"./InfoTooltip.js\";\n\nimport CurrentUserContext from \"../contexts/CurrentUserContext.js\";\n\nimport { api } from \"../utils/api.js\";\nimport { auth } from \"../utils/auth.js\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  \n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isSuccessInfoTooltipStatus, setIsSuccessInfoTooltipStatus] = useState(false);\n  const [email, setEmail] = useState(\" \");\n\n  const navigate = useNavigate();\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  function openInfoTooltip() {\n    setIsInfoTooltipOpen(true);\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setSelectedCard({});\n    setIsInfoTooltipOpen(false);\n  }\n\n useEffect(() => {\n  if (isLoggedIn) {\n    Promise.all([api.getUserInfo(), api.getItems()])\n    .then(([currentUser, initialCards]) => {\n      setCurrentUser(currentUser);\n      setCards(initialCards);\n    })\n    .catch((error) => {\n      console.log(`Не удалось получить данные ${error}`);\n    });\n  }\n}, [isLoggedIn]);\n\nuseEffect(() => {\n  handleTokenCheck();\n}, []);\n\nuseEffect(()=> {\n  if (isLoggedIn) {\n    navigate(\"/\")\n  }\n},[isLoggedIn, navigate]);\n\nfunction handleSubmit(request) {\n  setIsLoading(true);\n  request()\n    .then(closeAllPopups)\n    .catch(console.error)\n    .finally(() => setIsLoading(false));\n}\n\nfunction handleUpdateUser(data) {\n  function makeRequest() {\n    return api\n      .setUserInfo({ name: data.name, about: data.about })\n      .then(setCurrentUser);\n  }\n  handleSubmit(makeRequest);\n}\n\nfunction handleUpdateAvatar(data) {\n  function makeRequest() {\n    return api\n      .setAvatar(data)\n      .then(setCurrentUser);\n  }\n  handleSubmit(makeRequest);\n}\n\nfunction handleAddPlaceSubmit(data) {\n  function makeRequest() {\n    return api\n      .addCard(data)\n      .then((newCard) => {\n      setCards([newCard, ...cards]);\n    });\n  }\n  handleSubmit(makeRequest);\n}\n\nfunction handleCardLike(card) {\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\n  api\n    .changeLikeCardStatus(card._id, !isLiked)\n    .then((newCard) => {\n      setCards((state) =>\n        state.map((c) => (c._id === card._id ? newCard : c))\n      );\n    })\n    .catch((error) => console.log(`Возникла ошибка ${error}`));\n}\n\nfunction handleCardDelete(card) {\n  api\n    .deleteCard(card._id)\n    .then(() => {\n      setCards((state) => state.filter((c) => c._id !== card._id));\n    })\n    .catch((error) => console.log(`Не удалось удалить карточку ${error}`));\n}\n\nfunction handleRegister(data) {\n  return auth\n    .register(data)\n    .then((res) => {\n      setIsSuccessInfoTooltipStatus(true);\n      openInfoTooltip();\n      navigate(\"/sign-in\");\n    })\n    .catch((err) => {\n      console.log(err);\n      setIsSuccessInfoTooltipStatus(false);\n      openInfoTooltip();\n    })\n}\n\nfunction handleLogin(data) {\n  return auth\n    .login(data)\n    .then((res) => {\n      localStorage.setItem(\"jwt\", res.token);\n      setEmail(data.email)\n      setIsLoggedIn(true);\n      navigate(\"/\");\n    })\n    .catch((err) => {\n      console.log(err);\n      setIsSuccessInfoTooltipStatus(false);\n      openInfoTooltip();\n    });\n}\n\nfunction handleTokenCheck() {\n  const jwt = localStorage.getItem(\"jwt\");\n  if (!jwt) {\n    return;\n  }\n  auth\n    .checkToken(jwt)\n    .then((res) => {\n      setEmail(res.data.email);\n      setIsLoggedIn(true);\n      navigate(\"/\")\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n}\n\nfunction handleSignOut() {\n  localStorage.removeItem(\"jwt\");\n  setIsLoggedIn(false);\n  navigate(\"/sign-in\");\n}\n\nconst isOpen =\n    isEditAvatarPopupOpen ||\n    isEditProfilePopupOpen ||\n    isAddPlacePopupOpen ||\n    selectedCard.link;\n\n  useEffect(() => {\n    function closeByEscape(evt) {\n      if (evt.key === \"Escape\") {\n        closeAllPopups();\n      }\n    }\n    if (isOpen) {\n      document.addEventListener(\"keydown\", closeByEscape);\n      return () => {\n        document.removeEventListener(\"keydown\", closeByEscape);\n      };\n    }\n  }, [isOpen]);\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\">\n        <Header loggedIn={isLoggedIn} email={email} onSignOut={handleSignOut}/>\n\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <ProtectedRoute\n                element={Main}\n                onEditAvatar={handleEditAvatarClick}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onCardClick={handleCardClick}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n                cards={cards}\n                loggedIn={isLoggedIn}\n              />\n            }\n          />\n\n          <Route\n            path=\"/sign-in\"\n            element={<Login onLogin={handleLogin} navigate={navigate} />}\n          />\n\n          <Route\n            path=\"/sign-up\"\n            element={\n              <Register onRegister={handleRegister} navigate={navigate} />\n            }\n          />\n\n          <Route\n            path=\"*\"\n            element={\n              isLoggedIn ? <Navigate to=\"/\" /> : <Navigate to=\"/sign-in\" />\n            }\n          />\n        </Routes>\n\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          onLoading={isLoading}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          onLoading={isLoading}\n        />\n\n        <PopupWithForm\n          name=\"confirm\"\n          title=\"Вы уверены?\"\n          confirmation=\"Да\"\n          onClose={closeAllPopups}\n          onLoading={isLoading}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          onLoading={isLoading}\n        />\n\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n        <InfoTooltip\n            isOpen={isInfoTooltipOpen}\n            onClose={closeAllPopups}\n            isConfirmStatus={isSuccessInfoTooltipStatus}\n          />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;","/Users/darlene/Desktop/dev/react-mesto-auth/src/components/ImagePopup.jsx",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Login.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/InfoTooltip.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/ProtectedRoute.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Register.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Header.jsx",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/PopupWithForm.jsx",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Footer.jsx",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Main.jsx",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/contexts/CurrentUserContext.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/utils/api.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/utils/auth.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/EditAvatarPopup.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/EditProfilePopup.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/AddPlacePopup.js",["101"],[],"import PopupWithForm from \"./PopupWithForm\";\nimport { useEffect } from \"react\";\nimport useForm from \"../utils/useForm.js\";\n\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, onLoading }) {\n  const { values, handleChange, setValues } = useForm({});\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    onAddPlace({\n      name: values.title,\n      link: values.link,\n    });\n  }\n\n  useEffect(() => {\n    setValues({\n      title: (''),\n      link: ('')\n    })\n  }, [isOpen]);\n\n  return (\n    <PopupWithForm\n      name=\"item\"\n      title=\"Новое место\"\n      confirmation=\"Создать\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      buttonText={onLoading ? 'Создание...' : 'Создать'}\n    >\n      <input\n        className=\"popup__field popup__field_type_title\"\n        value={values.title || ''}\n        onChange={handleChange}\n        type=\"text\"\n        placeholder=\"Название\"\n        name=\"title\"\n        id=\"type-title\"\n        minLength={2}\n        maxLength={30}\n        required\n      />\n      <span className=\"type-title-error popup__error\" />\n      <input\n        className=\"popup__field popup__field_type_link\"\n        value={values.link || ''}\n        onChange={handleChange}\n        type=\"url\"\n        placeholder=\"Ссылка на картинку\"\n        name=\"link\"\n        id=\"type-link\"\n        required\n      />\n      <span className=\"type-link-error popup__error\" />\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;","/Users/darlene/Desktop/dev/react-mesto-auth/src/utils/useForm.js",[],[],"/Users/darlene/Desktop/dev/react-mesto-auth/src/components/Card.jsx",[],[],{"ruleId":"102","severity":1,"message":"103","line":87,"column":4,"nodeType":"104","endLine":87,"endColumn":6,"suggestions":"105"},{"ruleId":"102","severity":1,"message":"106","line":22,"column":6,"nodeType":"104","endLine":22,"endColumn":14,"suggestions":"107"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'handleTokenCheck'. Either include it or remove the dependency array.","ArrayExpression",["108"],"React Hook useEffect has a missing dependency: 'setValues'. Either include it or remove the dependency array.",["109"],{"desc":"110","fix":"111"},{"desc":"112","fix":"113"},"Update the dependencies array to be: [handleTokenCheck]",{"range":"114","text":"115"},"Update the dependencies array to be: [isOpen, setValues]",{"range":"116","text":"117"},[2461,2463],"[handleTokenCheck]",[480,488],"[isOpen, setValues]"]