{"ast":null,"code":"class Api {\n  constructor(options) {\n    this._url = options.url;\n  }\n  _checkResponse(res) {\n    if (res.ok) {\n      return Promise.resolve(res.json());\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n  _request(path, method, data) {\n    let body = data;\n    if ((method === \"PATCH\" || method === \"POST\") && data) {\n      body = JSON.stringify(data);\n    }\n    return fetch(this._url + path, {\n      method,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      },\n      body\n    }).then(this._checkResponse);\n  }\n  async getUserInfo() {\n    const response = await fetch(`${this._url}/users/me`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      }\n    });\n    return this._checkResponse(response);\n  }\n  async setUserInfo(data) {\n    const response = await fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      },\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    });\n    return this._checkResponse(response);\n  }\n  async getItems() {\n    const response = await fetch(`${this._url}/cards`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      }\n    });\n    return this._checkResponse(response);\n  }\n  async setAvatar(data) {\n    const response = await fetch(`${this._url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      },\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    });\n    return this._checkResponse(response);\n  }\n  async addCard(data) {\n    const response = await fetch(`${this._url}/cards`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      },\n      body: JSON.stringify(data)\n    });\n    return this._checkResponse(response);\n  }\n  deleteCard(id) {\n    return this._request(`cards/${id}`, \"DELETE\");\n  }\n  async deleteCard(id) {\n    const response = await fetch(`${this._url}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      }\n    });\n    return this._getResponseData(response);\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._request(`cards/${cardId}/likes`, \"PUT\");\n    } else {\n      return this._request(`cards/${cardId}/likes`, \"DELETE\");\n    }\n  }\n}\nexport const api = new Api({\n  url: \"http://localhost:3000\"\n});","map":{"version":3,"names":["Api","constructor","options","_url","url","_checkResponse","res","ok","Promise","resolve","json","reject","status","_request","path","method","data","body","JSON","stringify","fetch","headers","Authorization","localStorage","getItem","then","getUserInfo","response","authorization","setUserInfo","name","about","getItems","setAvatar","avatar","addCard","deleteCard","id","cardId","_getResponseData","changeLikeCardStatus","isLiked","api"],"sources":["/Users/darlene/Desktop/dev/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor(options) {\n    this._url = options.url;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return Promise.resolve(res.json())\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n\n  _request(path, method, data) {\n    let body = data;\n    if((method === \"PATCH\" || method === \"POST\") && data) {\n      body = JSON.stringify(data);\n    }\n    return fetch(this._url + path, {\n      method,\n      headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`},\n      body,\n    })\n    .then(this._checkResponse);\n  }\n\n  async getUserInfo() {\n    const response = await fetch(`${this._url}/users/me`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n    })\n    return this._checkResponse(response)\n  }\n\n  async setUserInfo(data) {\n    const response = await fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      }),\n    })\n    return this._checkResponse(response)\n  }\n\n  async getItems() {\n    const response = await fetch(`${this._url}/cards`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n    })\n    return this._checkResponse(response)\n  }\n\n  async setAvatar(data) {\n    const response = await fetch(`${this._url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n      body: JSON.stringify({\n        avatar: data.avatar,\n      }),\n    })\n    return this._checkResponse(response)\n  }\n\n  async addCard(data) {\n    const response = await fetch(`${this._url}/cards`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n      body: JSON.stringify(data),\n    })\n    return this._checkResponse(response)\n  }\n\n\n  deleteCard(id) {\n    return this._request(`cards/${id}`, \"DELETE\");\n  }\n\n  async deleteCard(id) {\n    const response = await fetch(`${this._url}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n    })\n    return this._getResponseData(response)\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._request(`cards/${cardId}/likes`, \"PUT\");\n    } else {\n      return this._request(`cards/${cardId}/likes`, \"DELETE\");\n    }\n  }\n}\n\nexport const api = new Api({\n  url: \"http://localhost:3000\",\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}