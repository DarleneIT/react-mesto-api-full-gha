{"ast":null,"code":"import _objectSpread from\"/Users/darlene/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/darlene/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/darlene/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Auth=/*#__PURE__*/function(){function Auth(options){_classCallCheck(this,Auth);this._url=options.url;this._headers=options.headers;}_createClass(Auth,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(res.status));}},{key:\"_request\",value:function _request(path,method,data){var body=data;if((method===\"PATCH\"||method===\"POST\")&&data){body=JSON.stringify(data);}return fetch(this._url+path,{method:method,headers:this._headers,body:body}).then(this._checkResponse);}},{key:\"register\",value:function register(data){return this._request(\"signup\",\"POST\",data);}},{key:\"login\",value:function login(data){return this._request(\"signin\",\"POST\",data);}},{key:\"checkToken\",value:function checkToken(jwt){return fetch(\"\".concat(this._url,\"users/me\"),{method:\"GET\",headers:_objectSpread(_objectSpread({},this._headers),{},{Authorization:\"Bearer \".concat(jwt)})}).then(this._checkResponse);}}]);return Auth;}();export var auth=new Auth({url:\"https://auth.nomoreparties.co/\",headers:{\"Content-Type\":\"application/json\"}});","map":{"version":3,"names":["Auth","options","_classCallCheck","_url","url","_headers","headers","_createClass","key","value","_checkResponse","res","ok","json","Promise","reject","concat","status","_request","path","method","data","body","JSON","stringify","fetch","then","register","login","checkToken","jwt","_objectSpread","Authorization","auth"],"sources":["/Users/darlene/Desktop/dev/react-mesto-auth/src/utils/auth.js"],"sourcesContent":["class Auth {\n    constructor(options) {\n      this._url = options.url;\n      this._headers = options.headers;\n    }\n  \n    _checkResponse(res) {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка ${res.status}`);\n    }\n  \n    _request(path, method, data) {\n      let body = data;\n      if ((method === \"PATCH\" || method === \"POST\") && data) {\n        body = JSON.stringify(data);\n      }\n      return fetch(this._url + path, {\n        method,\n        headers: this._headers,\n        body,\n      })\n      .then(this._checkResponse);\n    }\n  \n    register(data) {\n      return this._request(`signup`, \"POST\", data);\n    }\n  \n    login(data) {\n      return this._request(`signin`, \"POST\", data);\n    }\n  \n    checkToken(jwt) {\n      return fetch(`${this._url}users/me`, {\n        method: \"GET\",\n        headers: {\n          ...this._headers,\n          Authorization: `Bearer ${jwt}`,\n        },\n      }).then(this._checkResponse);\n    }\n  }\n  \n  export const auth = new Auth({\n    url: \"https://auth.nomoreparties.co/\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });"],"mappings":"mYAAM,CAAAA,IAAI,yBACN,SAAAA,KAAYC,OAAO,CAAE,CAAAC,eAAA,MAAAF,IAAA,EACnB,IAAI,CAACG,IAAI,CAAGF,OAAO,CAACG,GAAG,CACvB,IAAI,CAACC,QAAQ,CAAGJ,OAAO,CAACK,OAAO,CACjC,CAACC,YAAA,CAAAP,IAAA,GAAAQ,GAAA,kBAAAC,KAAA,CAED,SAAAC,eAAeC,GAAG,CAAE,CAClB,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,yCAAAC,MAAA,CAAWL,GAAG,CAACM,MAAM,CAAE,CAAC,CAC/C,CAAC,GAAAT,GAAA,YAAAC,KAAA,CAED,SAAAS,SAASC,IAAI,CAAEC,MAAM,CAAEC,IAAI,CAAE,CAC3B,GAAI,CAAAC,IAAI,CAAGD,IAAI,CACf,GAAI,CAACD,MAAM,GAAK,OAAO,EAAIA,MAAM,GAAK,MAAM,GAAKC,IAAI,CAAE,CACrDC,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CAC7B,CACA,MAAO,CAAAI,KAAK,CAAC,IAAI,CAACtB,IAAI,CAAGgB,IAAI,CAAE,CAC7BC,MAAM,CAANA,MAAM,CACNd,OAAO,CAAE,IAAI,CAACD,QAAQ,CACtBiB,IAAI,CAAJA,IACF,CAAC,CAAC,CACDI,IAAI,CAAC,IAAI,CAAChB,cAAc,CAAC,CAC5B,CAAC,GAAAF,GAAA,YAAAC,KAAA,CAED,SAAAkB,SAASN,IAAI,CAAE,CACb,MAAO,KAAI,CAACH,QAAQ,UAAW,MAAM,CAAEG,IAAI,CAAC,CAC9C,CAAC,GAAAb,GAAA,SAAAC,KAAA,CAED,SAAAmB,MAAMP,IAAI,CAAE,CACV,MAAO,KAAI,CAACH,QAAQ,UAAW,MAAM,CAAEG,IAAI,CAAC,CAC9C,CAAC,GAAAb,GAAA,cAAAC,KAAA,CAED,SAAAoB,WAAWC,GAAG,CAAE,CACd,MAAO,CAAAL,KAAK,IAAAT,MAAA,CAAI,IAAI,CAACb,IAAI,aAAY,CACnCiB,MAAM,CAAE,KAAK,CACbd,OAAO,CAAAyB,aAAA,CAAAA,aAAA,IACF,IAAI,CAAC1B,QAAQ,MAChB2B,aAAa,WAAAhB,MAAA,CAAYc,GAAG,CAAE,EAElC,CAAC,CAAC,CAACJ,IAAI,CAAC,IAAI,CAAChB,cAAc,CAAC,CAC9B,CAAC,WAAAV,IAAA,KAGH,MAAO,IAAM,CAAAiC,IAAI,CAAG,GAAI,CAAAjC,IAAI,CAAC,CAC3BI,GAAG,CAAE,gCAAgC,CACrCE,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}